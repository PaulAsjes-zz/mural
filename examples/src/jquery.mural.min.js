/*! mural - v0.0.1 - 2014-09-21
* https://github.com/PaulAsjes/mural
* Copyright (c) 2014 Paul Asjes; Licensed MIT */
var Detect=function(){function a(a){for(var b=a.charAt(0).toUpperCase()+a.substr(1),c=(a+" "+e.join(b+" ")+b).split(" "),d=0;d<c.length;d++)if(""===f.style[c[d]])return!0;return!1}var b,c,d="transition,transform,webkitTransition,webkitTransform,msTransform".split(","),e="Webkit,Moz,O,ms,Khtml".split(","),f=document.createElement("detect"),g=[];for(b in d)c=d[b],g[c]=a(c);return g}();Detect.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var Item=function(a,b){"use-strict";function c(a){j.css("z-index",10),n&&j.addClass(n),g=!0,a.preventDefault()}function d(){g&&j.trigger(Item.DRAG_END),g=!1,j.css("z-index",1),n&&j.removeClass(n)}function e(a){if(g){var b=a.pageX,c=a.pageY;a.touches&&(b=a.touches[0].pageX,c=a.touches[0].pageY),f(b,c)}}function f(a,b){var c=j.parent().offset(),d=a-k,e=b-l;switch(m){case"velocity":case"jquery":j.offset({left:d,top:e});break;default:case"css":if(!Detect.transform||!Detect.webkitTransform)return m="jquery",f(a,b);d-=c.left,e-=c.top;var g="translate("+d+"px, "+e+"px)";j.css("-webkit-transform",g),j.css("transform",g)}}var g=!1,h=window.jQuery,i=a,j=h(i),k=j.width()/2,l=j.height()/2,m=b.animationType,n=b.activeCSS,o=b.draggable;o&&(i.addEventListener("touchstart",c),i.addEventListener("touchend",d),i.addEventListener("touchmove",e),i.addEventListener("mousedown",c),window.document.addEventListener("mouseup",d),window.document.addEventListener("mousemove",e)),this.getElement=function(){return i},this.getJQElement=function(){return j}};Item.DRAG_END="dragend",Item.DRAG_START="dragstart",function(a){"use strict";function b(c){switch(c){case"jquery":return"jquery";case"css":return Detect.transform&&Detect.webkitTransform&&Detect.msTransform?"jquery":"css";default:case"velocity":return void 0!==a.Velocity?"velocity":b("css")}}function c(b){for(var c=a(b.currentTarget),h=!1,j=l.map(function(a){return a.getElement()}),k=0;k<l.length;k++)if(b.currentTarget!==l[k].getElement()&&overlaps(c[0],l[k].getElement(),!1,i)){var m={},n=c.offset();m.x=c.width()/2+n.left,m.y=c.height()/2+n.top;var o=d(m,l[k].getJQElement()),p=j.indexOf(c[0]),q=j.indexOf(l[k].getElement()),r=0;q>p?"left"===o&&(r=-1):"right"===o&&(r=1),l.splice(q+r,0,l.splice(p,1).shift()),j.splice(q+r,0,j.splice(p,1).shift()),h=!0;break}if(!h){var s=j.indexOf(c[0]);e(c,l[0].getJQElement())?l.splice(0,0,l.splice(s,1).shift()):f(c,l[l.length-1].getJQElement())&&l.splice(l.length,0,l.splice(s,1).shift())}g(l)}function d(a,b){var c=a.x-i.left,d=b.width()/2,e=b.position(),f=e.left+d;return f>c?"left":"right"}function e(a,b){return a.position().top<b.position().top}function f(a,b){return a.position().top>b.position().top}function g(a){var b=k.container.width(),c=parseInt(a[0].getJQElement().css("width"),10),d=c+k.wgap+k.wgap/a.length,e=Math.floor(b/d);e>k.maxColumns?e=k.maxColumns:1>e&&(e=1),e>a.length&&(e=a.length);for(var f=0;f<a.length;f++){var g=Math.floor(f/e),j=f%e,l=a[f].getJQElement(),m=l.width(),n=l.height(),o=m+k.wgap,p=n+k.hgap;l[0].newT=i.top+g*p;var q=0;if(k.centered){var r=e*m+k.wgap*(e-1);q=(b-r)/2}l[0].newL=Math.round(i.left+q+j*o),l[0].newT<0&&(l[0].newT=0),l[0].newL<0&&(l[0].newL=0)}h(a)}function h(a){for(var b=0;b<a.length;b++){var c=a[b].getJQElement(),d=c.position(),e=c.parent().offset();if(d.top!==c[0].newT||d.left!==c[0].newL)switch(k.animationType){case"jquery":c.stop(!0,!1),c.animate({top:c[0].newT,left:c[0].newL},k.speed);break;case"velocity":c.velocity({top:c[0].newT,left:c[0].newL},k.speed);break;default:case"css":c[0].newL-=e.left,c[0].newT-=e.top;var f="translate("+c[0].newL+"px, "+c[0].newT+"px)";c.css("-webkit-transition","-webkit-transform "+k.speed/1e3+"s"),c.css("-webkit-transform",f),c.css("transform",f),function(b){setTimeout(function(){a[b].getJQElement().css("-webkit-transition","")},k.speed)}(b)}}k.onReshuffle&&setTimeout(function(){k.onReshuffle.call(this,a.map(function(a){return a.getElement()}))},k.speed)}var i,j=function(){},k={},l=[];a.fn.mural=function(d){k=a.extend({},a.fn.mural.defaults,d),k.container=this,k.animationType=b(k.animationType);var e=null;a.isPlainObject(k.order)&&k.order.data&&(e=k.order.data.map(function(b){return a("["+k.order.attribute+"|="+b).get(0)}));for(var f=e||a(k.itemSelector),h=0;h<f.length;h++){var j=new Item(f[h],k);l.push(j),j.getJQElement().bind(Item.DRAG_END,c).css("position","absolute")}i=this.offset();var m;return a(window).resize(function(){clearTimeout(m),m=setTimeout(function(){g(l)},150)}),g(l),this},a.fn.mural.defaults={cols:5,itemSelector:".mural-item",speed:500,wgap:50,hgap:50,maxColumns:1/0,minColumns:1,shrinkOnResize:!0,onReshuffle:j,animationType:"auto",centered:!0,activeCSS:"",order:null,draggable:!0},a.expr[":"].mural=function(b){return-1!==a(b).text().indexOf("awesome")}}(jQuery);var overlaps=function(a){"use-strict";function b(a){var b,c,d;return b=e(a).position(),c=e(a).width(),d=e(a).height(),[[b.left,b.left+c],[b.top,b.top+d]]}function c(a,b){var c,d,e=b.left||0,f=b.top||0;return c=a.x-e,d=a.y-f,[[c,c+1],[d,d+1]]}function d(a,b){var c,d;return c=a[0]<b[0]?a:b,d=a[0]<b[0]?b:a,c[1]>d[0]||c[0]===d[0]}var e=a.jQuery;return function(a,e,f,g){var h,i;return f?(h=c(a,g),i=b(e),d(h[0],i[0])&&d(h[1],i[1])):(h=b(a),i=b(e),d(h[0],i[0])&&d(h[1],i[1]))}}(window);